<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Quiz</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Added link to the jQuery Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Added a link to Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

  <!-- Added a link to our external stylesheet-->
  <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="timer">Time:<span id="current-time">0</span></div>
    <div class="title" id="start-screen">
        <h1>Code Quiz</h1>
        <p class="start-par">Click the start button to begin the Code quiz. You will have 60 seconds to complete the quiz. If you get a question wrong, you will have 10 seconds deducted. At the end of the quiz, please enter your initials so your score may be saved on the score board.</p>
        <button id="start-button">
            <h1>Start!</h1>
        </button>
    </div>
    <div class="container">
        <div id ="question-container" class="hide">
            <div id = "question">Question</div>
            <div id = "answer-btns" class="btn-grid">
            </div>
        </div>
        
    </div>
    <div id="done-screen" class="hide">
        <div class="score-board">Score=<span id="score">0</span></div>
    </div>
    <script type="text/javascript">
    var startButton = document.getElementById("start-button");
    var questionContainerEl = document.getElementById("question-container");
    var questionEl = document.getElementById("question");
    var answerButtonEl = document.getElementById("answer-btns");
    var startScreen = document.getElementById("start-screen");
    var currentTime = document.getElementById("current-time");
    var doneScreen = document.getElementById("done-screen");
    var score = document.getElementById("score");

    startButton.addEventListener("click", startGame);
    
    var time= 30;
    var index = 0;
    var questions = [
        {
            questionTitle:"1. Commonly used data types do NOT include:",
            choices: ["Booleans","Strings","Alerts","Numbers"],
            correctAnswer: "Alerts"
        },
        {
            questionTitle:"2. The condition in an if/else statement is enclosed within __",
            choices: ["Quotes","Curly Brackets","Parentheses","Square Brackets"],
            correctAnswer: "Parentheses"
        },
        {
            questionTitle:"3. Arrays in javascript can be used to store__",
            choices: ["Numbers and strings","Other arrays","Booleans","All of the Above"],
            correctAnswer: "All of the Above"
        },
        {
            questionTitle:"4. String values must be enclosed within__ when being assigned to variables.",
            choices: ["Commas","Curly Brackets","Quotes","Parentheses"],
            correctAnswer: "Quotes"
        },
        {
            questionTitle:"5. A useful tool used during the development and debugging for printing content to the debugger is ___",
            choices: ["Javascript","For Loops","Terminal Bash","Console.log"],
            correctAnswer: "Console.log"
        },
    ]
    
    function timer(){
        time--
        currentTime.textContent=time;
        if (time <= 0){
            time=0;
            //Call end quiz function here
            endQuiz()
        }
    }

    function startGame(){
    startScreen.setAttribute("class","hide");
    questionContainerEl.removeAttribute("class");
    //SetInterval starts the timer and changes the time every 1 second (1000ms)
    setInterval(timer,1000);
    currentTime.textContent=time;
    getQuestion();
};
    function getQuestion(){
        var current = questions[index];
        questionEl.textContent=current.questionTitle;
        answerButtonEl.innerHTML="";
        current.choices.forEach(function(choice,i){
            console.log(choice,i)
            var button = document.createElement("button");
            button.setAttribute("value",choice)
            button.textContent=choice;
            // Attach onclick for each choice here
            button.onclick=selectAnswer
            answerButtonEl.append(button);
        });
    }

    function selectAnswer(){
   if (this.value !== questions[index].correctAnswer){
       time -=10

       //Stops timer at zero (to keep it from running negative)
       if (time < 0){
           time =0;
       }
       currentTime.textContent=time;
   }
   index++
   if (index === questions.length){
       //Call end quiz function here 
       endQuiz()
   }
   else {
       getQuestion();
   }
}
    function endQuiz(){
            questionContainerEl.setAttribute("class","hide");
            doneScreen.removeAttribute("class");
            doneScreen.textContent="All done!";
            score.textContent=time;
    }


    </script>

</body>
</html>